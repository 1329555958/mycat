<?xml version="1.0" encoding="UTF-8"?>
<!-- - - Licensed under the Apache License, Version 2.0 (the "License"); 
	- you may not use this file except in compliance with the License. - You 
	may obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 
	- - Unless required by applicable law or agreed to in writing, software - 
	distributed under the License is distributed on an "AS IS" BASIS, - WITHOUT 
	WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the 
	License for the specific language governing permissions and - limitations 
	under the License. -->
<!DOCTYPE mycat:rule SYSTEM "rule.dtd">
<mycat:rule xmlns:mycat="http://io.mycat/">

    <!-- dpm-->
    <!-- 两个节点-->
    <tableRule name="rule-account-no-2">
        <rule>
            <columns>ACCOUNT_NO</columns>
            <algorithm>sharding-by-stringhash10-2</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-transaction-no-2">
        <rule>
            <columns>TRANSACTION_NO</columns>
            <algorithm>sharding-by-stringhash16-2</algorithm>
        </rule>
    </tableRule>
    <!--dpm 三个节点 -->
    <tableRule name="rule-account-no-3">
        <rule>
            <columns>ACCOUNT_NO</columns>
            <algorithm>sharding-by-stringhash10-3</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-transaction-no-3">
        <rule>
            <columns>TRANSACTION_NO</columns>
            <algorithm>sharding-by-stringhash16-3</algorithm>
        </rule>
    </tableRule>
    <!--dpm 五个节点 -->
    <tableRule name="rule-account-no-5">
        <rule>
            <columns>ACCOUNT_NO</columns>
            <algorithm>sharding-by-stringhash10-5</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-transaction-no-5">
        <rule>
            <columns>TRANSACTION_NO</columns>
            <algorithm>sharding-by-stringhash16-5</algorithm>
        </rule>
    </tableRule>
    <!-- dpm end -->

    <!--payment -->
    <!-- 两个节点 -->
    <tableRule name="rule-payment-payment_seq_no-2">
        <rule>
            <columns>PAYMENT_SEQ_NO</columns>
            <algorithm>sharding-by-stringhash10-2-1</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-request_no-2">
        <rule>
            <columns>REQUEST_NO</columns>
            <algorithm>sharding-by-stringhash16-2</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-biz_payment_seq_no-2">
        <rule>
            <columns>BIZ_PAYMENT_SEQ_NO</columns>
            <algorithm>sharding-by-stringhash10-2-1</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-session_id-2">
        <rule>
            <columns>SESSION_ID</columns>
            <algorithm>sharding-by-stringhash16-2</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-message_key-2">
        <rule>
            <columns>MESSAGE_KEY</columns>
            <algorithm>sharding-by-stringhash10-2-10</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-settlement_session_id-2">
        <rule>
            <columns>SETTLEMENT_SESSION_ID</columns>
            <algorithm>sharding-by-stringhash16-2</algorithm>
        </rule>
    </tableRule>

    <!-- 三个节点 -->
    <tableRule name="rule-payment-payment_seq_no-3">
        <rule>
            <columns>PAYMENT_SEQ_NO</columns>
            <algorithm>sharding-by-stringhash10-3-1</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-request_no-3">
        <rule>
            <columns>REQUEST_NO</columns>
            <algorithm>sharding-by-stringhash16-3</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-biz_payment_seq_no-3">
        <rule>
            <columns>BIZ_PAYMENT_SEQ_NO</columns>
            <algorithm>sharding-by-stringhash10-3-1</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-session_id-3">
        <rule>
            <columns>SESSION_ID</columns>
            <algorithm>sharding-by-stringhash16-3</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-message_key-3">
        <rule>
            <columns>MESSAGE_KEY</columns>
            <algorithm>sharding-by-stringhash10-3-10</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-settlement_session_id-3">
        <rule>
            <columns>SETTLEMENT_SESSION_ID</columns>
            <algorithm>sharding-by-stringhash16-3</algorithm>
        </rule>
    </tableRule>
    <!-- 五个节点 -->
    <tableRule name="rule-payment-payment_seq_no-5">
        <rule>
            <columns>PAYMENT_SEQ_NO</columns>
            <algorithm>sharding-by-stringhash10-5-1</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-request_no-5">
        <rule>
            <columns>REQUEST_NO</columns>
            <algorithm>sharding-by-stringhash16-5</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-biz_payment_seq_no-5">
        <rule>
            <columns>BIZ_PAYMENT_SEQ_NO</columns>
            <algorithm>sharding-by-stringhash10-5-1</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-session_id-5">
        <rule>
            <columns>SESSION_ID</columns>
            <algorithm>sharding-by-stringhash16-5</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-message_key-5">
        <rule>
            <columns>MESSAGE_KEY</columns>
            <algorithm>sharding-by-stringhash10-5-10</algorithm>
        </rule>
    </tableRule>
    <tableRule name="rule-payment-settlement_session_id-5">
        <rule>
            <columns>SETTLEMENT_SESSION_ID</columns>
            <algorithm>sharding-by-stringhash16-5</algorithm>
        </rule>
    </tableRule>
    <!--payment end -->
    <!-- tss -->
    <!-- 两个节点 -->
    <tableRule name="rule-tss-payment_voucher_no-2">
        <rule>
            <columns>PAYMENT_VOUCHER_NO</columns>
            <algorithm>sharding-by-stringhash10-2-1</algorithm>
        </rule>
    </tableRule>

    <tableRule name="rule-tss-trade_voucher_no-2">
        <rule>
            <columns>TRADE_VOUCHER_NO</columns>
            <algorithm>sharding-by-stringhash10-2-1</algorithm>
        </rule>
    </tableRule>
    <!-- 三个节点 -->
    <tableRule name="rule-tss-payment_voucher_no-3">
        <rule>
            <columns>PAYMENT_VOUCHER_NO</columns>
            <algorithm>sharding-by-stringhash10-3-1</algorithm>
        </rule>
    </tableRule>

    <tableRule name="rule-tss-trade_voucher_no-3">
        <rule>
            <columns>TRADE_VOUCHER_NO</columns>
            <algorithm>sharding-by-stringhash10-3-1</algorithm>
        </rule>
    </tableRule>
    <!-- 五个节点 -->
    <tableRule name="rule-tss-payment_voucher_no-5">
        <rule>
            <columns>PAYMENT_VOUCHER_NO</columns>
            <algorithm>sharding-by-stringhash10-5-1</algorithm>
        </rule>
    </tableRule>

    <tableRule name="rule-tss-trade_voucher_no-5">
        <rule>
            <columns>TRADE_VOUCHER_NO</columns>
            <algorithm>sharding-by-stringhash10-5-1</algorithm>
        </rule>
    </tableRule>
    <!-- tss end -->
    <!--配置结束 -->


    <function name="sharding-by-stringhash10-2-1" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">53,971</property><!-- 0-2=>0 3-5=>1 6-9=>2 -->
        <property name="partitionCount">1,1</property>
        <property name="hashSlice">-1:</property>
    </function>
    <function name="sharding-by-stringhash10-3-1" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">51,3,970</property><!-- 0-2=>0 3-5=>1 6-9=>2 -->
        <property name="partitionCount">1,1,1</property>
        <property name="hashSlice">-1:</property>
    </function>
    <function name="sharding-by-stringhash10-5-1" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">50,2,2,2,968</property><!-- 0-1=>0 2-3=>1 4-5=>2 6-7=>3 8-9=>4 -->
        <property name="partitionCount">1,1,1,1,1</property>
        <property name="hashSlice">-1:</property>
    </function>
    <function name="sharding-by-stringhash10-2-10" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">53,971</property><!-- 0-2=>0 3-5=>1 6-9=>2 -->
        <property name="partitionCount">1,1</property>
        <property name="hashSlice">-10:-9</property>
    </function>
    <function name="sharding-by-stringhash10-3-10" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">51,3,970</property><!-- 0-2=>0 3-5=>1 6-9=>2 -->
        <property name="partitionCount">1,1,1</property>
        <property name="hashSlice">-10:-9</property>
    </function>
    <function name="sharding-by-stringhash10-5-10" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">50,2,2,2,968</property><!-- 0-1=>0 2-3=>1 4-5=>2 6-7=>3 8-9=>4 -->
        <property name="partitionCount">1,1,1,1,1</property>
        <property name="hashSlice">-10:-9</property>
    </function>
    <function name="sharding-by-stringhash10-2" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">53,971</property><!-- 0-4=>0 5-9=>1 -->
        <property name="partitionCount">1,1</property>
        <property name="hashSlice">-6:-5</property>
    </function>
    <function name="sharding-by-stringhash10-3" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">51,3,970</property><!-- 0-2=>0 3-5=>1 6-9=>2 -->
        <property name="partitionCount">1,1,1</property>
        <property name="hashSlice">-6:-5</property>
    </function>
    <function name="sharding-by-stringhash10-5" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">50,2,2,2,968</property><!-- 0-1=>0 2-3=>1 4-5=>2 6-7=>3 8-9=>4 -->
        <property name="partitionCount">1,1,1,1,1</property>
        <property name="hashSlice">-6:-5</property>
    </function>
    <function name="sharding-by-stringhash10-7" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">49,1,1,1,1,1,970</property><!-- 0=>0 1=>1 2=>2 3=>3  4-5=>2 6-7=>3 8-9=>4 -->
        <property name="partitionCount">1,1,1,1,1,1,1</property>
        <property name="hashSlice">-6:-5</property>
    </function>


    <function name="sharding-by-stringhash16-2" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">56,968</property><!-- 0-7=>0 8-f=>1 -->
        <property name="partitionCount">1,1</property>
        <property name="hashSlice">-1:</property>
    </function>
    <function name="sharding-by-stringhash16-3" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">53,5,966</property><!-- 0-4=>0 5-9=>1 a-f=>2 -->
        <property name="partitionCount">1,1,1</property>
        <property name="hashSlice">-1:</property>
    </function>

    <function name="sharding-by-stringhash16-5" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">51,3,3,42,925</property><!-- 0-2=>0 3-5=>1 6-8=>2 9ab=>3  c-f=>4 -->
        <property name="partitionCount">1,1,1,1,1</property>
        <property name="hashSlice">-1:</property>
    </function>
    <function name="sharding-by-stringhash16-7" class="io.mycat.route.function.PartitionByString">
        <property name="partitionLength">50,2,2,2,2,42,924
        </property><!-- 0-1=>0 2-3=>1 4-5=>2 6-7=>3 8-9=>4 a-c=>5 d-f=>6 -->
        <property name="partitionCount">1,1,1,1,1,1,1</property>
        <property name="hashSlice">-1:</property>
    </function>

</mycat:rule>
